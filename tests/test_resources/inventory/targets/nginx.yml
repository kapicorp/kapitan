parameters:
  host_port: 8080
  container_port: 80
  server_name: localhost
  website: $(pwd)/compiled/${kapitan:vars:target}/manifests/html
  root: /usr/share/nginx/html
  charset: koi8-r

  kapitan:
    vars:
      target: nginx
    compile:
      - output_path: manifests
        input_type: jinja2
        input_paths:
         - templates/nginx.conf

    dependencies:
      - type: git
        output_path: kapitan_repo
        source: git@github.com:deepmind/kapitan.git
      - type: git
        output_path: kapitan_subdir_tests
        ref: master
        subdir: tests
        source: git@github.com:deepmind/kapitan.git
      - type: http
        output_path: file
        source: https://kubernetes-charts.storage.googleapis.com/acs-engine-autoscaler-0.1.0.tgz